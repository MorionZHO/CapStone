(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[26],{91015:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard",function(){return a(85560)}])},59434:function(e,t,a){"use strict";a.d(t,{s:function(){return n}});var s=a(85893),l=a(23370),r=a(50656),i=a(54339);let n=e=>{let{image:t,title:a,subtitle:n,price:o,change:d,isSelected:c,onClick:m,isLoading:u,className:f,isClickable:p=!0}=e;return(0,s.jsxs)("div",{className:(0,i.cn)("flex gap-4 px-4 sm:px-6 py-4 border-b border-black/10 [&:last-child]:border-b-0 justify-between transition-colors",p&&"cursor-pointer hover:bg-black/[0.03]",c?"bg-black/[0.04] hover:bg-black/[0.04]":"bg-transparent",f),onClick:p?m:void 0,children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[u?(0,s.jsx)(l.O,{className:"h-10 w-10 rounded-full"}):(0,s.jsx)("img",{src:t,alt:a,width:32,height:32,className:"rounded-full"}),(0,s.jsx)("div",{className:"flex flex-col gap-1",children:u?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l.O,{className:"h-5 w-24"}),(0,s.jsx)(l.O,{className:"h-4 w-20"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.Z,{type:"h3",size:"small",children:a}),(0,s.jsx)(r.Z,{type:"p",size:"small",children:n})]})})]}),(0,s.jsx)("div",{className:"flex flex-col gap-1 justify-end",children:u?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l.O,{className:"h-5 w-16"}),(0,s.jsx)(l.O,{className:"h-4 w-12"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"text-base font-medium text-right",children:o}),(0,s.jsxs)("span",{className:"text-sm font-medium text-right ".concat(parseFloat(d)>=0?"text-[#0CCA4A]":"text-[color:#F63333]"),children:[parseFloat(d)>=0?"+":"",d]})]})})]})}},34164:function(e,t,a){"use strict";a.d(t,{C:function(){return n}});var s=a(85893);a(67294);var l=a(45139),r=a(54339);let i=(0,l.j)("inline-flex items-center rounded-full border px-3 py-1 sm:px-4 sm:py-1.5 text-sm sm:text-base font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",green:"border-transparent bg-[#0CCA4A]/10 text-[#0CCA4A]",red:"border-transparent bg-[#FF5F56]/10 text-[#FF5F56]",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function n(e){let{className:t,variant:a,...l}=e;return(0,s.jsx)("div",{className:(0,r.cn)(i({variant:a}),t),...l})}},20753:function(e,t,a){"use strict";a.d(t,{U:function(){return s}});let s={value:{color:"#0CCA4A",label:"Price"},stat2:{color:"#F63333",label:"Without interest"}}},85560:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return z}});var s=a(85893),l=a(91269),r=a(68536),i=a(67294),n=a(11163),o=a(35497),d=a(8592);function c(e){var t=new Date(e),a=t.getFullYear(),s=t.getMonth()+1;return t.getDate()+"/"+s+"/"+a}let m=(e,t,a)=>{let s=[],l=new Date(1e3*t),r=new Date(1e3*a);for(;l<=r;)switch(s.push({timestamp:l.getTime()/1e3,price:1}),e){case"1W":default:l.setHours(l.getHours()+6);break;case"1M":l.setDate(l.getDate()+1);break;case"6M":case"1Y":case"YTD":l.setDate(l.getDate()+7)}if("1Y"===e||"YTD"===e){let e=new Date;e.setHours(0,0,0,0);let t=new Date(1e3*s[s.length-1].timestamp);t.setHours(0,0,0,0),t.getTime()<e.getTime()&&s.push({timestamp:e.getTime()/1e3,price:1})}return s},u=e=>{let t=new Date;t.setHours(0,0,0,0);let a=new Date(t);switch(e){case"1D":default:a.setDate(t.getDate()-1);break;case"1W":a.setDate(t.getDate()-7);break;case"1M":a.setMonth(t.getMonth()-1);break;case"6M":a.setMonth(t.getMonth()-6);break;case"1Y":a.setFullYear(t.getFullYear()-1);break;case"YTD":a.setMonth(0,1),a.setHours(0,0,0,0)}return{fromDate:Math.floor(a.getTime()/1e3),toDate:Math.floor(t.getTime()/1e3)}},f=(e,t)=>{if(!t||0===t.length)return{balance:0};let a=new Date(1e3*e).setHours(0,0,0,0),s=t.filter(e=>new Date(e.timeStamp).setHours(0,0,0,0)===a);if(s.length>0)return s.reduce((e,t)=>new Date(t.timeStamp)>new Date(e.timeStamp)?t:e);let l=t.filter(t=>new Date(t.timeStamp).getTime()/1e3<=e);return 0===l.length?{balance:0}:l.reduce((e,t)=>new Date(t.timeStamp)>new Date(e.timeStamp)?t:e)},p=(e,t)=>[{date:c(new Date().setDate(new Date().getDate()+1)),value:(e*t-e).toFixed(2)},{date:c(new Date().setDate(new Date().getDate()+31)),value:(e*Math.pow(t,30)-e).toFixed(2)},{date:c(new Date().setDate(new Date().getDate()+366)),value:(e*Math.pow(t,365)-e).toFixed(2)}];var x=a(19042),h=a(50125),g=a(74206),D=a(42154),v=a(34283),S=a(36596),b=a(41923),w=a(1388),y=a(33408),j=a(61315),E=a(2749);function _(e){let{config:t,selectedData:a}=e,[l,r]=(0,i.useState)(null),[n,o]=(0,i.useState)(null),[d,c]=(0,i.useState)(null),[m,u]=(0,i.useState)(null),[f,p]=(0,i.useState)(!1),x=(0,i.useRef)(null),E=(0,i.useMemo)(()=>{if(!d||!m)return a;let e=!1,t=a.reduce((t,a)=>(a.year===d&&(e=!0),a.year===m&&(e=!1),e&&t.push(a),t),[]);return t.length>1?t:a.slice(0,2)},[d,m,a]);return(0,s.jsx)(y.BO,{config:t,className:"h-[366px] relative",ref:x,children:(0,s.jsxs)(h.T,{accessibilityLayer:!0,data:E,margin:{left:12,right:12,top:12},children:[(0,s.jsx)(g.q,{vertical:!1,opacity:.5,stroke:"#D9D9D9",strokeDasharray:"11.87 11.87"}),(0,s.jsx)(D.K,{dataKey:"year",tickLine:!1,axisLine:{stroke:"#D9D9D9"},tickMargin:8,tick:{fontSize:12}}),(0,s.jsx)(v.B,{tickLine:!1,axisLine:{stroke:"#D9D9D9"},tickMargin:8,tickFormatter:e=>new Intl.NumberFormat("en-US",{notation:"compact",style:"currency",currency:"USD",compactDisplay:"long"}).format(e),tick:{fontSize:12}}),(0,s.jsx)(y.h7,{cursor:!1,content:(0,s.jsx)(y.dg,{formatValue:e=>(0,w.CV)(String(null!=e?e:0),j.UD)})}),(0,s.jsxs)("defs",{children:[(0,s.jsxs)("linearGradient",{id:"fillValue",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,s.jsx)("stop",{offset:"5%",stopColor:"var(--color-value)",stopOpacity:.8}),(0,s.jsx)("stop",{offset:"95%",stopColor:"var(--color-value)",stopOpacity:.1})]}),(0,s.jsxs)("linearGradient",{id:"fillStat2",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,s.jsx)("stop",{offset:"5%",stopColor:"var(--color-stat2)",stopOpacity:.8}),(0,s.jsx)("stop",{offset:"95%",stopColor:"var(--color-stat2)",stopOpacity:.1})]})]}),(0,s.jsx)(S.u,{dataKey:"value",type:"basis",fill:"url(#fillValue)",fillOpacity:.4,strokeWidth:2,stroke:"var(--color-value)",stackId:"a",dot:e=>null}),l&&n&&(0,s.jsx)(b.z,{x1:l,x2:n,strokeOpacity:.3,fill:"hsl(var(--foreground))",fillOpacity:.05})]})})}var k=a(23370),N=a(50656),C=a(20753);function A(e){let{isLoggedIn:t,selectedAsset:a,period:l,setPeriod:r,selectedData:i,displayedTotal:n,displayedChange:o,isLoading:d}=e,c=i&&0!==i.length?i:function(){let e=[],t=new Date;for(let a=6;a>=0;a--){let s=new Date(t);s.setDate(s.getDate()-a),e.push({year:s.toLocaleDateString(),value:0,stat2:0})}return e}();return(0,s.jsxs)("div",{className:"bg-white relative overflow-hidden border w-full border-black/10 rounded-2xl h-auto p-4 sm:p-8 flex flex-col self-start gap-4 sm:gap-8 min-h-0 shadow-custom",children:[!t&&(0,s.jsx)("div",{className:"inset-0 absolute flex items-center justify-center z-10 bg-white/60 backdrop-blur-[2px]",children:(0,s.jsx)("span",{className:"text-black/60 font-medium text-xl",children:"Connect to view"})}),(0,s.jsxs)("div",{className:"flex justify-between flex-col sm:flex-row items-start gap-4 sm:items-center",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-1 sm:gap-2",children:[(0,s.jsx)(N.Z,{type:"p",size:"small",color:"muted",children:a?"My ".concat(a.name," investments"):"My investments"}),(0,s.jsx)("div",{className:"flex gap-2 items-center",children:d?(0,s.jsx)(k.O,{className:"w-20 h-8"}):(0,s.jsxs)(N.Z,{type:"large",children:["$",(n||0).toFixed(2)]})})]}),(0,s.jsx)("div",{className:"flex gap-2",children:["1W","1M","6M","1Y","YTD"].map(e=>d?(0,s.jsx)(k.O,{className:"py-1.5 px-3 w-12 h-10"},e):(0,s.jsx)(E.z,{variant:"outline",className:"".concat(l===e?"text-black border-black/10":"text-black/60 hover:text-black border-transparent"),onClick:()=>r(e),children:e},e))})]}),(0,s.jsx)(_,{config:C.U,selectedData:c})]})}a(34164);var L=a(95416);function M(){let e=(0,n.useRouter)();return(0,s.jsx)("div",{className:"bg-custom-gradient-2 overflow-hidden border w-full border-black/10 rounded-2xl h-auto p-4 sm:p-8 flex relative gap-4 sm:gap-8 min-h-0 shadow-custom",children:(0,s.jsxs)("div",{className:"flex flex-col mr-auto items-start gap-6",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-2 sm:gap-3",children:[(0,s.jsxs)(N.Z,{type:"h2",size:"normal",className:"sm:text-[28px] sm:leading-[36px]",children:["Earn ",(0,s.jsx)("span",{className:"text-[#60B6FF] font-bold",children:"5%"})," risk-free"]}),(0,s.jsx)(N.Z,{type:"p",color:"muted",children:"Simply swap your USDT for USDX!"})]}),(0,s.jsxs)(E.z,{onClick:()=>e.push("/dashboard/invest/USDX?tab=mint"),variant:"outline",size:"hero",children:[(0,s.jsx)("span",{children:"Swap Now"}),(0,s.jsx)(L.Z,{className:"size-4"})]})]})})}var R=e=>(0,s.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:[(0,s.jsx)("g",{id:"ic_more_horiz_48px",clipPath:"url(#clip0_57_16)",children:(0,s.jsx)("path",{id:"Vector",d:"M4.99998 8.33333C4.07915 8.33333 3.33331 9.07916 3.33331 9.99999C3.33331 10.9208 4.07915 11.6667 4.99998 11.6667C5.92081 11.6667 6.66665 10.9208 6.66665 9.99999C6.66665 9.07916 5.92081 8.33333 4.99998 8.33333ZM15 8.33333C14.0791 8.33333 13.3333 9.07916 13.3333 9.99999C13.3333 10.9208 14.0791 11.6667 15 11.6667C15.9208 11.6667 16.6666 10.9208 16.6666 9.99999C16.6666 9.07916 15.9208 8.33333 15 8.33333ZM9.99998 8.33333C9.07915 8.33333 8.33331 9.07916 8.33331 9.99999C8.33331 10.9208 9.07915 11.6667 9.99998 11.6667C10.9208 11.6667 11.6666 10.9208 11.6666 9.99999C11.6666 9.07916 10.9208 8.33333 9.99998 8.33333Z",fill:"currentColor"})}),(0,s.jsx)("defs",{children:(0,s.jsx)("clipPath",{id:"clip0_57_16",children:(0,s.jsx)("rect",{width:"20",height:"20",fill:"white"})})})]});function T(e){let{onAssetSelect:t,assets:a,value:l}=e;return(0,s.jsx)("div",{className:"space-y-4",children:a&&a.length>0&&(0,s.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:a.map((e,a)=>(0,s.jsx)("div",{onClick:()=>t(e.name),className:"cursor-pointer border rounded-xl p-4 transition-all duration-200 hover:shadow-md ".concat(l===e.name?"bg-blue-50 border-blue-200 shadow-md":"bg-white border-gray-200 hover:bg-gray-50"),children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-xl overflow-hidden bg-gray-100",children:(0,s.jsx)("img",{src:e.image,alt:e.name,className:"w-full h-full object-cover"})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)(N.Z,{type:"p",className:"font-medium text-gray-900 truncate",children:"WHITE"===e.name?"WhiteRock":e.name}),(0,s.jsxs)(N.Z,{type:"p",size:"small",className:"text-gray-600",children:["$",e.totalValue.toFixed(2)]})]}),l===e.name&&(0,s.jsx)("div",{className:"w-3 h-3 bg-blue-600 rounded-full flex-shrink-0"})]})},a))})})}var F=a(59434);function O(e){let{isLoggedIn:t,isLoading:a,holdingData:l,selectedAsset:r,setSelectedAsset:i,period:n}=e;return(0,s.jsxs)("div",{className:"bg-white border w-full border-black/10 rounded-2xl flex flex-col min-h-0 shadow-custom",children:[(0,s.jsxs)("div",{className:"sm:p-6 p-4 border-b flex justify-between border-black/10",children:[(0,s.jsx)(N.Z,{type:"h2",size:"small",children:"Holdings"}),(0,s.jsx)(R,{className:"text-black/60 cursor-pointer"})]}),(0,s.jsx)("div",{className:"flex flex-col",children:!t||a?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(F.s,{isLoading:!t||a}),(0,s.jsx)(F.s,{isLoading:!t||a})]}):l.map((e,t)=>(0,s.jsx)(F.s,{image:e.image,title:e.name||"Token ".concat(t+1),subtitle:"".concat(e.shares||0," Shares"),price:"$".concat((e.totalValue||0).toFixed(2)),change:"".concat(e.change||0,"%"),isSelected:(null==r?void 0:r.name)===e.name,onClick:()=>i(e),isLoading:a,className:""},"".concat(t,"-").concat(n)))})]})}function U(e){let{isLoggedIn:t,isLoading:a,earnings:l}=e;return(0,s.jsxs)("div",{className:"bg-white border group w-full border-black/10 rounded-2xl flex flex-col min-h-0 shadow-custom mb-5",children:[(0,s.jsxs)("div",{className:"p-4 sm:p-6 border-b flex justify-between border-black/10",children:[(0,s.jsx)(N.Z,{type:"h2",size:"small",children:"Projected USDX Earnings"}),(0,s.jsx)(R,{className:"text-black/60 cursor-pointer"})]}),(0,s.jsx)("div",{className:"flex flex-col",children:!t||a?Array.from({length:3}).map((e,t)=>(0,s.jsxs)("div",{className:"flex justify-between w-full px-4 sm:px-6 py-4 border-b",children:[(0,s.jsx)(k.O,{className:"h-5 w-20"}),(0,s.jsx)(k.O,{className:"h-5 w-14"})]},t)):l&&l.length>0?l.map((e,t)=>(0,s.jsxs)("div",{className:"flex gap-4 justify-between px-4 sm:px-6 py-4 border-b [&:last-child]:border-b-0 border-black/10",children:[(0,s.jsx)("span",{className:"text-sm text-black/60",children:e.date}),(0,s.jsxs)("span",{className:"text-sm font-medium ".concat(e.value>=0?"text-[#0CCA4A]":"text-[color:#F63333]"),children:[e.value>=0?"+":"","$",e.value]})]},t)):(0,s.jsx)("div",{className:"flex gap-4 justify-center px-4 sm:px-6 py-4 border-b [&:last-child]:border-b-0 border-black/10",children:(0,s.jsx)("span",{className:"text-sm text-black/60",children:"You don't have any USDX"})})})]})}var H=a(54339),I=a(41664),X=a.n(I);function W(){let[e,t]=(0,i.useState)(),[a,l]=(0,i.useState)(0),{userTokens:n,address:c,isLoggedIn:h,network:g}=(0,i.useContext)(r.V),[D,v]=(0,i.useState)("1W"),[S,b]=(0,i.useState)([]),[w,y]=(0,i.useState)(0),[j,_]=(0,i.useState)(0),[k,C]=(0,i.useState)([]),[L,R]=(0,i.useState)([]),[F,I]=(0,i.useState)([]),[W,z]=(0,i.useState)(0),[Y,Z]=(0,i.useState)(0),[J,V]=(0,i.useState)(!0),[P,B]=(0,i.useState)(!0);(0,i.useMemo)(()=>{if(n){let e=Math.pow(1.05,1/365);C(n.filter(e=>e.address===o.ADDRESSES[g].USDX_ADDRESS).flatMap(t=>p(t.balance,e))),B(!1)}},[n]),(0,i.useEffect)(()=>{if(n){let e=n.find(e=>e.address===o.ADDRESSES[g].USDX_ADDRESS);l(e?e.balance:0)}},[n,g]);let{data:G}=(0,d.rU)();(0,i.useEffect)(()=>{if(G&&n){let e=G.filter(e=>n.map(e=>e.address).includes(e["address_"+g.toLowerCase()]));e.some(e=>e.address_ethereum===o.ADDRESSES[g].WHITE_ADDRESS)||e.push({address_ethereum:o.ADDRESSES[g].WHITE_ADDRESS,balance:0,name:"WHITE",icon_url:"https://oe7ql4syifnyivmi.public.blob.vercel-storage.com/token_icons/white_icon-EpnI8sPmsFEc36t1O4ul9r0tpcmewl.png"}),e.some(e=>e.address_ethereum===o.ADDRESSES[g].USDX_ADDRESS)||e.push({address_ethereum:o.ADDRESSES[g].USDX_ADDRESS,balance:0,name:"USDX",icon_url:"https://oe7ql4syifnyivmi.public.blob.vercel-storage.com/token_icons/USDX_icon-MwZovQk5TUMEOaD2r6PeRSJG7i92MG.png"}),R(e.sort((e,t)=>{let a=e["address_"+g.toLowerCase()]===o.ADDRESSES[g].WHITE_ADDRESS||"WHITE"===e.name,s=t["address_"+g.toLowerCase()]===o.ADDRESSES[g].WHITE_ADDRESS||"WHITE"===t.name,l=e["address_"+g.toLowerCase()]===o.ADDRESSES[g].USDX_ADDRESS||"USDX"===e.name,r=t["address_"+g.toLowerCase()]===o.ADDRESSES[g].USDX_ADDRESS||"USDX"===t.name;return a?-1:s?1:l?-1:r?1:0}))}},[G,n,g]);let $=(0,i.useMemo)(()=>u(D),[D]),K=(0,i.useMemo)(()=>(null==L?void 0:L.filter(e=>e.is_stock))||[],[L]),q=(0,d.K_)(K.map(e=>e.symbol).join(","),function(){let e=new Date(new Date().getTime()-432e6);return e.setHours(5,0,0,0),Math.floor(e.getTime()/1e3)}()),Q=(0,d.if)(L.filter(e=>!e.is_stock).map(e=>e["address_"+g.toLowerCase()]).filter(e=>void 0!==e).join(","),$.fromDate,$.toDate),ee=(0,d.wd)(c,null==L?void 0:L.map(e=>e["address_"+g.toLowerCase()]),"mainnet"),[et,ea]=(0,i.useState)([]),{data:es}=(0,d.yK)(null==L?void 0:L.map(e=>e["address_"+g.toLowerCase()]).join(",")),el=(0,i.useCallback)(()=>{if((Q.every(e=>e.data)||q.every(e=>e.data))&&ee.every(e=>e.data)&&es&&n){let e=new Map,t=[],a={};Q.forEach((e,t)=>{let s=L.filter(e=>!e.is_stock)[t];if(s&&e.data){let t;s["address_"+g.toLowerCase()]===o.ADDRESSES[g].USDX_ADDRESS?t=m(D,$.fromDate,$.toDate):(t=[...e.data],es[s.symbol]&&(console.log(es[s.symbol]),t.push({timestamp:Math.floor(Date.now()/1e3),price:es[s.symbol]}))),a[s["address_"+g.toLowerCase()]]=t}}),K.forEach((e,t)=>{var s,l;if(null===(s=q[t])||void 0===s?void 0:s.data){let s=null===(l=q[t].data[0])||void 0===l?void 0:l.price,r=new Date(1e3*$.fromDate),i=new Date(1e3*$.toDate),n=[],o=new Date(r);for(;o<=i;)switch(n.push({timestamp:Math.floor(o.getTime()/1e3),price:s}),D){case"1W":default:o.setDate(o.getDate()+1);break;case"1M":o.setDate(o.getDate()+3);break;case"6M":case"1Y":case"YTD":o.setDate(o.getDate()+7)}let d=new Date;d.setHours(0,0,0,0),n.length>0&&new Date(1e3*n[n.length-1].timestamp).getDate()!==d.getDate()&&n.push({timestamp:Math.floor(d.getTime()/1e3),price:s}),a[e["address_"+g.toLowerCase()]]=n}}),null==L||L.forEach((s,l)=>{var r,i,d,c,m,u,p,x,h,D,v,S,b,w,y,j,E;let _=s["address_"+g.toLowerCase()],k=null!==(d=a[_])&&void 0!==d?d:[{timestamp:new Date().getTime()/1e3,price:1}],N=null===(i=ee[l])||void 0===i?void 0:null===(r=i.data)||void 0===r?void 0:r.balances;if((!N||!N.length)&&(s.is_stock||_===o.ADDRESSES[g].USDX_ADDRESS||_===o.ADDRESSES[g].WHITE_ADDRESS)){let a=n.find(e=>e.address===_),r=parseFloat(null!==(c=null==a?void 0:a.balance)&&void 0!==c?c:0);if(s.is_stock||_===o.ADDRESSES[g].USDX_ADDRESS||_===o.ADDRESSES[g].WHITE_ADDRESS){let a,i=1;if(s.is_stock){let e=K.findIndex(e=>e.name===s.name);e>=0&&(null===(m=q[e])||void 0===m?void 0:m.data)&&(i=(null===(u=q[e].data[0])||void 0===u?void 0:u.price)||0)}else es&&s.symbol&&(console.log(es[s.symbol]),i=es[s.symbol]||1);let o=r*i,d=0;if(s.is_stock){let e=K.findIndex(e=>e.name===s.name);if(e>=0&&(null===(p=q[e])||void 0===p?void 0:p.data)){let t=null===(x=q[e])||void 0===x?void 0:x.data;if(t&&t.length>=2){let e=(null===(h=t[t.length-1])||void 0===h?void 0:h.price)||0,a=(null===(D=t[t.length-2])||void 0===D?void 0:D.price)||0;a>0&&(d=(e-a)/a*100)}}}if(t.push({name:s.name,shares:r.toFixed(2),totalValue:o,change:d.toFixed(2),image:s.icon_url,isStock:s.is_stock}),Date.now(),s.is_stock){if($.fromDate,n&&(null===(S=ee[l])||void 0===S?void 0:null===(v=S.data)||void 0===v?void 0:v.balances)){let e=ee[l].data.balances;if(e&&e.length>0){let t=e.reduce((e,t)=>new Date(t.timeStamp).getTime()/1e3<(e?new Date(e.timeStamp).getTime()/1e3:1/0)?t:e,null);t&&new Date(t.timeStamp).getTime()}}}else a=$.fromDate;k.forEach(t=>{let s=t.timestamp;if(s>=a){let a=r*t.price;e.has(s)?e.set(s,e.get(s)+a):e.set(s,a)}else e.has(s)?e.set(s,e.get(s)):e.set(s,0)})}return}if(!k||!(null==N?void 0:N.length)&&!s.is_stock)return;k.forEach((t,a)=>{var s,l;let r;let i=t.timestamp;if(a===k.length-1){let e=n.find(e=>e.address===_);r=parseFloat(null!==(s=null==e?void 0:e.balance)&&void 0!==s?s:0)}else{let e=f(i,N);r=parseFloat(null!==(l=null==e?void 0:e.balance)&&void 0!==l?l:0)}let o=r*t.price;e.has(i)?e.set(i,e.get(i)+o):e.set(i,o)});let C=k[k.length-1],A=n.find(e=>e.address===_),L=parseFloat(null!==(b=null==A?void 0:A.balance)&&void 0!==b?b:0),M=L*(null==C?void 0:C.price)||0,R=0;if(s.is_stock){let e=K.findIndex(e=>e.name===s.name);if(e>=0&&(null===(w=q[e])||void 0===w?void 0:w.data)){let t=null===(y=q[e])||void 0===y?void 0:y.data;if(t&&t.length>=2){let e=(null===(j=t[t.length-1])||void 0===j?void 0:j.price)||0,a=(null===(E=t[t.length-2])||void 0===E?void 0:E.price)||0;a>0&&(R=(e-a)/a*100)}}}else{let e=k[k.length-2];R=e?(C.price-e.price)/e.price*100:0}t.push({name:s.name,shares:L.toFixed(2),totalValue:M,change:R.toFixed(2),image:s.icon_url,isStock:s.is_stock})}),ea(e=>JSON.stringify(e)===JSON.stringify(t)?e:t),V(!1),y(t.reduce((e,t)=>e+t.totalValue,0));let s=Array.from(e.entries()).map(e=>{let[t,a]=e;return{year:new Date(1e3*t).toLocaleDateString(),value:a}}).sort((e,t)=>new Date(e.year)-new Date(t.year));if(s.length>=2){let e=s[s.length-1].value,t=s[s.length-2].value;0===t?_(0):_((e-t)/t*100)}b(e=>JSON.stringify(e)===JSON.stringify(s)?e:s)}},[Q,q,ee,es,n,D,$.fromDate,$.toDate,K,g]);(0,i.useEffect)(()=>{el()},[el]),(0,i.useEffect)(()=>{if(e&&Q.every(e=>e.data)&&q.every(e=>e.data)&&ee.every(e=>e.data)&&es&&n){var t,a,s,l,r,i,d;let c;let u=null==L?void 0:L.find(t=>t.name===e.name);if(!u)return;let p=(null===(a=ee[L.findIndex(e=>e.name===u.name)])||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.balances)||[];if(u.is_stock){let e=K.findIndex(e=>e.name===u.name);if(e>=0&&(null===(s=q[e])||void 0===s?void 0:s.data)){let t=null===(l=q[e].data[0])||void 0===l?void 0:l.price,a=new Date(1e3*$.fromDate),s=new Date(1e3*$.toDate);c=[];let r=new Date(a);for(;r<=s;)switch(c.push({timestamp:Math.floor(r.getTime()/1e3),price:t}),D){case"1W":default:r.setDate(r.getDate()+1);break;case"1M":r.setDate(r.getDate()+3);break;case"6M":case"1Y":case"YTD":r.setDate(r.getDate()+7)}let i=new Date;i.setHours(0,0,0,0),c.length>0&&new Date(1e3*c[c.length-1].timestamp).getDate()!==i.getDate()&&c.push({timestamp:Math.floor(i.getTime()/1e3),price:t})}else c=[]}else u["address_"+g.toLowerCase()]===o.ADDRESSES[g].USDX_ADDRESS?c=m(D,$.fromDate,$.toDate):(c=[...(null===(r=Q[L.filter(e=>!e.is_stock).findIndex(e=>e.name===u.name)])||void 0===r?void 0:r.data)||[]],es[u.symbol]&&c.push({timestamp:Math.floor(Date.now()/1e3),price:es[u.symbol]}));if(!(null==p?void 0:p.length)&&(u["address_"+g.toLowerCase()]===o.ADDRESSES[g].USDX_ADDRESS||u["address_"+g.toLowerCase()]===o.ADDRESSES[g].WHITE_ADDRESS)||u.is_stock){let e=new Date;e.setHours(0,0,0,0);let t=n.find(e=>e.address===u["address_"+g.toLowerCase()]),a=parseFloat(null!==(i=null==t?void 0:t.balance)&&void 0!==i?i:0);if(c&&c.length>0){let e=[];if(u.is_stock){let t=$.fromDate;if(p&&p.length>0){let e=p.reduce((e,t)=>new Date(t.timeStamp).getTime()/1e3<(e?new Date(e.timeStamp).getTime()/1e3:1/0)?t:e,null);e&&(t=new Date(e.timeStamp).getTime()/1e3)}e=c.map(e=>({year:new Date(1e3*e.timestamp).toLocaleDateString(),value:e.timestamp>=t?a*e.price:0}))}else e=c.map(e=>({year:new Date(1e3*e.timestamp).toLocaleDateString(),value:a*e.price}));let t=e.sort((e,t)=>new Date(e.year)-new Date(t.year)),s=!0;F&&F.length===t.length&&JSON.stringify(F)===JSON.stringify(t)&&(s=!1),s&&I(t);let l=a*c[c.length-1].price;if(W!==l&&z(l),u.is_stock&&c.length>=2){let e=c[c.length-1].price,t=c[c.length-2].price,a=(e-t)/t*100;Y!==a&&Z(a)}else 0!==Y&&Z(0)}else{let t=[{year:e.toLocaleDateString(),value:0}];JSON.stringify(F)!==JSON.stringify(t)&&I(t),0!==W&&z(0),0!==Y&&Z(0)}return}if(!c)return;let x=c.map(e=>{var t,a;let s;let l=e.timestamp;if(p&&p.length>0){let e=f(l,p);s=parseFloat(null!==(t=null==e?void 0:e.balance)&&void 0!==t?t:0)}else{let e=n.find(e=>e.address===u["address_"+g.toLowerCase()]);s=parseFloat(null!==(a=null==e?void 0:e.balance)&&void 0!==a?a:0)}return{year:new Date(1e3*l).toLocaleDateString(),value:s*e.price}}).sort((e,t)=>new Date(e.year)-new Date(t.year)),h=c[c.length-1],v=c.length>1?c[c.length-2]:null,S=n.find(e=>e.address===u["address_"+g.toLowerCase()]),b=parseFloat(null!==(d=null==S?void 0:S.balance)&&void 0!==d?d:0)*h.price,w=0;v&&(w=(h.price-v.price)/v.price*100),W!==b&&z(b),Y!==w&&Z(w),JSON.stringify(F)!==JSON.stringify(x)&&I(x)}else if(Q.every(e=>e.data)&&L){let e=[],t=Q.findIndex(e=>e.data&&e.data.length>0),a=(t>=0?Q[t].data:null)||m(D,$.fromDate,$.toDate),s=Math.floor(Date.now()/1e3);a.find(e=>e.timestamp===s)||(a=[...a,{timestamp:s}]),a.forEach((t,l)=>{let r=t.timestamp,i=0;L.forEach((e,t)=>{var d,c,m,u,p,x,h,D,v,S;let b;let w=1;if(e.is_stock){let a=K.findIndex(t=>t.name===e.name);a>=0&&(null===(m=q[a])||void 0===m?void 0:m.data)&&(w=(null===(x=q[a].data[0])||void 0===x?void 0:x.price)||0);let s=n.find(t=>t.address===e["address_"+g.toLowerCase()]);b=parseFloat(null!==(h=null==s?void 0:s.balance)&&void 0!==h?h:0);let l=$.fromDate,o=null===(p=ee[t])||void 0===p?void 0:null===(u=p.data)||void 0===u?void 0:u.balances;if(o&&o.length>0){let e=o.reduce((e,t)=>new Date(t.timeStamp).getTime()/1e3<(e?new Date(e.timeStamp).getTime()/1e3:1/0)?t:e,null);e&&(l=new Date(e.timeStamp).getTime()/1e3)}r>=l&&(i+=b*w);return}let y=null===(c=ee[t])||void 0===c?void 0:null===(d=c.data)||void 0===d?void 0:d.balances;if(!y||0===y.length){if(e["address_"+g.toLowerCase()]===o.ADDRESSES[g].USDX_ADDRESS||e["address_"+g.toLowerCase()]===o.ADDRESSES[g].WHITE_ADDRESS){let t=n.find(t=>t.address===e["address_"+g.toLowerCase()]);b=parseFloat(null!==(D=null==t?void 0:t.balance)&&void 0!==D?D:0),e["address_"+g.toLowerCase()]===o.ADDRESSES[g].USDX_ADDRESS?i+=b:es&&es[e.symbol]&&(i+=b*es[e.symbol])}return}if(l===a.length-1){let t=n.find(t=>t.address===e["address_"+g.toLowerCase()]);b=parseFloat(null!==(v=null==t?void 0:t.balance)&&void 0!==v?v:0)}else{let e=f(r,y);b=parseFloat((null==e?void 0:e.balance)||0)}if(e["address_"+g.toLowerCase()]===o.ADDRESSES[g].USDX_ADDRESS)i+=b;else if(es&&r===s&&es[e.symbol])i+=b*es[e.symbol];else{let e=null===(S=Q[t])||void 0===S?void 0:S.data;if(!e)return;let a=e.find(e=>e.timestamp===r)||e[0];a&&(i+=b*a.price)}}),e.push({year:new Date(1e3*r).toLocaleDateString(),value:i})}),e.sort((e,t)=>new Date(e.year)-new Date(t.year)),JSON.stringify(F)!==JSON.stringify(e)&&I(e),W!==w&&z(w),Y!==j&&Z(j)}},[e,D,Q,q,L,K,w,j,ee,$.fromDate,$.toDate,es,n,g]);let er=(0,H.sh)();return(0,s.jsxs)("div",{className:"w-full",children:[(0,s.jsx)(x.$,{paddingX:"px-4 sm:px-0",paddingY:"py-0",className:"mb-6 sm:mb-8",children:(0,s.jsx)("div",{className:"w-full bg-gradient-to-r from-blue-50 via-white to-purple-50 border border-gray-200/60 rounded-2xl sm:rounded-3xl p-4 sm:p-6 lg:p-8 shadow-sm",children:(0,s.jsxs)("div",{className:"flex flex-col gap-4 sm:gap-6 lg:flex-row lg:items-center lg:justify-between",children:[(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)(N.Z,{type:"h1",size:"small",className:"font-bold text-gray-900 text-xl sm:text-2xl lg:text-3xl mb-1 sm:mb-2",children:[(()=>{let e=new Date().getHours();return e<12?"Good Morning":e<18?"Good Afternoon":"Good Evening"})(),"! \uD83D\uDC4B"]}),(0,s.jsx)(N.Z,{type:"p",className:"text-gray-600 text-sm sm:text-base lg:text-lg mb-3 sm:mb-4",children:"Welcome back to your investment portfolio"}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2 sm:gap-4",children:(0,s.jsxs)("div",{className:"flex items-center gap-2 bg-white/80 rounded-lg sm:rounded-xl px-3 sm:px-4 py-1.5 sm:py-2 border border-gray-200",children:[(0,s.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(er?"bg-green-500":"bg-red-500")}),(0,s.jsx)("span",{className:"text-xs sm:text-sm font-medium text-gray-700",children:er?"Stock Markets Open":"Stock Markets Closed"})]})})]}),(0,s.jsx)("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-3 lg:flex-shrink-0 w-full sm:w-auto",children:(0,s.jsx)(X(),{href:"/dashboard/invest",className:"flex-1 sm:flex-initial",children:(0,s.jsxs)(E.z,{className:"w-full sm:w-auto bg-[#333333] hover:bg-[#2b2a2a] text-white border-0 rounded-lg sm:rounded-xl px-4 sm:px-6 py-2.5 sm:py-3 font-medium text-sm sm:text-base",children:[(0,s.jsx)("svg",{className:"w-3 h-3 sm:w-4 sm:h-4 mr-1.5 sm:mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})}),(0,s.jsx)("span",{className:"whitespace-nowrap",children:"Explore Assets"})]})})})]})})}),(0,s.jsxs)(x.$,{className:"grid grid-cols-1 xl:grid-cols-7 gap-8 place-items-start",paddingX:"px-0",paddingY:"py-0",children:[(0,s.jsxs)("div",{className:"col-span-full xl:col-span-5 grid gap-8 bg-white w-full",children:[(0,s.jsx)(A,{isLoggedIn:h,isLoading:J,selectedAsset:e,period:D,setPeriod:v,selectedData:F,displayedTotal:W,displayedChange:Y}),(0,s.jsx)(M,{})]}),(0,s.jsxs)("div",{className:"col-span-full xl:col-span-2 bg-white w-full flex flex-col gap-4 mt-[-15px]",children:[(0,s.jsx)(T,{selectedAsset:e,setSelectedAsset:t}),(0,s.jsx)(O,{isLoggedIn:h,isLoading:J,holdingData:et||[],selectedAsset:e,setSelectedAsset:t,usdxBalance:a,earnings:k,isEarningsLoading:P,period:D}),(0,s.jsx)(U,{isLoggedIn:h,isLoading:P,earnings:k})]})]})]})}var z=function(){let[e,t]=(0,i.useState)(!0);(0,n.useRouter)();let{}=(0,i.useContext)(r.V);return(0,s.jsx)(l.default,{children:(0,s.jsx)(W,{})})}}},function(e){e.O(0,[959,796,69,782,711,677,262,404,996,961,888,774,179],function(){return e(e.s=91015)}),_N_E=e.O()}]);